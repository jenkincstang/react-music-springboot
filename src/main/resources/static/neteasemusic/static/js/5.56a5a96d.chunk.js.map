{"version":3,"sources":["webpack:///./src/views/Recommend/index.styl?0e89","views/Recommend/index.styl","views/Recommend/index.js"],"names":["content","module","i","options","locals","exports","push","Recommend","props","parseDiscoverImage","list","map","item","url","includes","targetId","url0","console","info","playlistItemClick","index","history","pathname","id","state","playlist","imageList","discList","loading","this","setState","getDiscoverImage","then","resp","data","getDiscoverPlaylist","catch","err","errMsg","finally","className","probeType","onItemClick","discoverPlaylistItemClick","setImageHeight","bind","key","onClick","throttle","height","placeholder","overflow","once","src","picUrl","width","alt","title","username","Component"],"mappings":"qGAAA,IAAIA,EAAU,EAAQ,KAEC,kBAAZA,IACTA,EAAU,CAAC,CAACC,EAAOC,EAAIF,EAAS,MAGlC,IAAIG,EAAU,CAEd,OAAiB,OACjB,WAAoB,GAEP,EAAQ,GAAR,CAAwFH,EAASG,GAE1GH,EAAQI,SACVH,EAAOI,QAAUL,EAAQI,S,qBCdjBH,EAAOI,QAAU,EAAQ,GAAR,EAAgE,IAEnFC,KAAK,CAACL,EAAOC,EAAI,mvCAAovC,M,oXCKvwCK,E,YAEF,WAAYC,GAAQ,IAAD,8BACf,4CAAMA,KAQVC,mBAAqB,SAACC,GAgBlB,OAfAA,EAAOA,EAAKC,KAAI,SAAAC,GACZ,IAAIC,EAAMD,EAAKC,IAOf,OALID,EAAKC,IAAIC,SAAS,WAEXF,EAAKC,IAAIC,SAAS,gBACzBD,EAAG,qBAAiBD,EAAKG,W,yVAEtB,CAAP,GACOH,EADP,CAEII,KAAMJ,EAAKC,IACXA,IAAKA,OAGbI,QAAQC,KAAKR,GACNA,GAzBQ,EAwDnBS,kBAAoB,SAACP,EAAMQ,GACvBH,QAAQC,KAAK,EAAKV,MAAOI,GACzB,EAAKJ,MAAMa,QAAQf,KAAK,CACpBgB,SAAS,cAAD,OAAgBV,EAAKW,IAC7BC,MAAO,CAACC,SAAUb,MA1DtB,EAAKY,MAAQ,CACTE,UAAW,GACXC,SAAU,GACVC,SAAS,GALE,E,iFA4BE,IAAD,OAChBC,KAAKC,SAAS,CACVF,SAAS,IAEbG,cACKC,MAAK,SAAAC,GAKF,OAJAhB,QAAQC,KAAKe,GACb,EAAKH,SAAS,CACVJ,UAAW,EAAKjB,mBAAmBwB,EAAKC,QAErCC,cACFH,MAAK,SAAAC,GACF,EAAKH,SAAS,CACVH,SAAUM,EAAKC,aAI9BE,OAAM,SAAAC,GACHpB,QAAQC,KAAKmB,EAAIC,WAEpBC,SAAQ,WACL,EAAKT,SAAS,CACVF,SAAS,S,+BAcf,IAAD,OACL,OACI,yBAAKY,UAAW,aACZ,kBAAC,IAAD,CAAUC,UAAW,EAAGD,UAAW,oBAC/B,yBAAKA,UAAW,qBACZ,yBAAKA,UAAW,kBACZ,kBAAC,IAAD,CAAU9B,KAAMmB,KAAKL,MAAME,UACjBgB,YAAab,KAAKc,0BAClBC,eAAgBf,KAAKe,eACrBd,SAAUD,KAAKC,SAASe,KAAKhB,SAE3C,yBAAKW,UAAW,kBACZ,wBAAIA,UAAW,cAAf,wCACA,4BAEQX,KAAKL,MAAMG,SAAShB,KAAI,SAACC,EAAMQ,GAC3B,OAAQ,wBAAI0B,IAAKlC,EAAKW,GAAIiB,UAAW,OACzBO,QAAS,EAAK5B,kBAAkB0B,KAAK,EAAMjC,EAAMQ,IACzD,yBAAKoB,UAAW,QACZ,kBAAC,IAAD,CAAUQ,SAAU,IAAKC,OAAQ,GAAIC,YAAa,kBAAC,IAAD,MACxCC,UAAQ,EAACC,KAAMxC,EAAKwC,MAC1B,yBAAKC,IAAKzC,EAAK0C,OAAQC,MAAO,GAAIN,OAAQ,GAAIO,IAAI,OAG1D,yBAAKhB,UAAW,QACZ,wBAAIA,UAAW,QAAS5B,EAAK6C,OAC7B,uBAAGjB,UAAW,QAAS5B,EAAK8C,iBAOpD,kBAAC,IAAD,CAAS9B,QAASC,KAAKL,MAAMI,iB,GAnG7B+B,aA2GTpD","file":"neteasemusic/static/js/5.56a5a96d.chunk.js","sourcesContent":["var content = require(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/stylus-loader/index.js!./index.styl\");\n\nif (typeof content === 'string') {\n  content = [[module.id, content, '']];\n}\n\nvar options = {}\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = require(\"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\")(content, options);\n\nif (content.locals) {\n  module.exports = content.locals;\n}\n","exports = module.exports = require(\"../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".recommend {\\n  width: 100%;\\n  top: 88px;\\n  bottom: 0;\\n}\\n.recommend .recommend-scroll {\\n  height: calc(100vh - 89px - 60px);\\n}\\n.recommend .recommend-content {\\n  overflow: hidden;\\n}\\n.recommend .recommend-content .slider-wrapper {\\n  position: relative;\\n  overflow: hidden;\\n}\\n@media screen and (min-width: 900px) {\\n  .recommend .slider-wrapper {\\n    padding: 0 20%;\\n  }\\n}\\n.recommend .recommend-list .list-title {\\n  height: 65px;\\n  line-height: 65px;\\n  text-align: center;\\n  font-size: 14px;\\n  color: #ffcd32;\\n}\\n.recommend .recommend-list .item {\\n  display: flex;\\n  box-sizing: border-box;\\n  align-items: center;\\n  padding: 0 20px 20px 20px;\\n}\\n.recommend .recommend-list .item .icon {\\n  flex: 0 0 60px;\\n  width: 60px;\\n  padding-right: 20px;\\n}\\n.recommend .recommend-list .item .text {\\n  display: flex;\\n  flex-direction: column;\\n  justify-content: center;\\n  flex: 1;\\n  line-height: 20px;\\n  overflow: hidden;\\n  font-size: 14px;\\n}\\n.recommend .recommend-list .item .text .name {\\n  margin-bottom: 10px;\\n  color: #fff;\\n}\\n.recommend .recommend-list .item .text .desc {\\n  color: rgba(255,255,255,0.3);\\n}\\n.recommend .loading-container {\\n  position: absolute;\\n  width: 100%;\\n  top: 50%;\\n  transform: translateY(-50%);\\n}\\n\", \"\"]);\n\n","import React, {Component} from 'react';\r\nimport './index.styl';\r\n\r\nimport {postMusic, getDiscoverImage, getDiscoverPlaylist} from \"../../services/NetEaseAxios\";\r\nimport {Loading, MySlider, MyScroll} from \"../../components\";\r\nimport LazyLoad from \"react-lazyload\";\r\n\r\nclass Recommend extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            imageList: [],\r\n            discList: [],\r\n            loading: false,\r\n        }\r\n    }\r\n\r\n    parseDiscoverImage = (list) => {\r\n        list = list.map(item => {\r\n            let url = item.url;\r\n            //歌曲 直接播放\r\n            if (item.url.includes('/song?')) {\r\n                // url = ``\r\n            } else if (item.url.includes('/playlist?')) {\r\n                url = `/recommend/${item.targetId}`\r\n            }\r\n            return {\r\n                ...item,\r\n                url0: item.url,\r\n                url: url,\r\n            }\r\n        });\r\n        console.info(list)\r\n        return list;\r\n    };\r\n\r\n    componentDidMount() {\r\n        this.setState({\r\n            loading: true,\r\n        });\r\n        getDiscoverImage()\r\n            .then(resp => {\r\n                console.info(resp);\r\n                this.setState({\r\n                    imageList: this.parseDiscoverImage(resp.data),\r\n                });\r\n                return getDiscoverPlaylist()\r\n                    .then(resp => {\r\n                        this.setState({\r\n                            discList: resp.data,\r\n                        });\r\n                    });\r\n            })\r\n            .catch(err => {\r\n                console.info(err.errMsg);\r\n            })\r\n            .finally(() => {\r\n                this.setState({\r\n                    loading: false,\r\n                })\r\n            });\r\n    }\r\n\r\n\r\n    playlistItemClick = (item, index) => {\r\n        console.info(this.props, item);\r\n        this.props.history.push({\r\n            pathname: `/recommend/${item.id}`,\r\n            state: {playlist: item}\r\n        });\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <div className={'recommend'}>\r\n                <MyScroll probeType={3} className={'recommend-scroll'}>\r\n                    <div className={'recommend-content'}>\r\n                        <div className={'slider-wrapper'}>\r\n                            <MySlider list={this.state.imageList}\r\n                                      onItemClick={this.discoverPlaylistItemClick}\r\n                                      setImageHeight={this.setImageHeight}\r\n                                      setState={this.setState.bind(this)}/>\r\n                        </div>\r\n                        <div className={'recommend-list'}>\r\n                            <h1 className={'list-title'}>热门歌单推荐</h1>\r\n                            <ul>\r\n                                {\r\n                                    this.state.discList.map((item, index) => {\r\n                                        return (<li key={item.id} className={'item'}\r\n                                                    onClick={this.playlistItemClick.bind(this, item, index)}>\r\n                                            <div className={'icon'}>\r\n                                                <LazyLoad throttle={200} height={60} placeholder={<Loading/>}\r\n                                                          overflow once={item.once}>\r\n                                                    <img src={item.picUrl} width={60} height={60} alt=\"\"/>\r\n                                                </LazyLoad>\r\n                                            </div>\r\n                                            <div className={'text'}>\r\n                                                <h2 className={'name'}>{item.title}</h2>\r\n                                                <p className={'desc'}>{item.username}</p>\r\n                                            </div>\r\n                                        </li>)\r\n                                    })\r\n                                }\r\n                            </ul>\r\n                        </div>\r\n                        <Loading loading={this.state.loading}/>\r\n                    </div>\r\n                </MyScroll>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Recommend;"],"sourceRoot":""}