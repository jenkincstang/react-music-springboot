{"version":3,"sources":["webpack:///./src/views/Rank/index.styl?c6e6","views/Rank/index.styl","views/Rank/index.js"],"names":["content","module","i","options","locals","exports","push","Rank","props","useState","topList","setTopList","scrollRef","useRef","rankRef","handleItemClick","item","console","info","history","pathname","id","state","playlist","useEffect","getTopList","then","resp","data","map","picUrl0","picUrl","setImageSize","className","ref","reference","index","onClick","bind","key","placeholder","height","width","scrollContainer","src","title","desc","v-show"],"mappings":"qGAAA,IAAIA,EAAU,EAAQ,KAEC,kBAAZA,IACTA,EAAU,CAAC,CAACC,EAAOC,EAAIF,EAAS,MAGlC,IAAIG,EAAU,CAEd,OAAiB,OACjB,WAAoB,GAEP,EAAQ,GAAR,CAAwFH,EAASG,GAE1GH,EAAQI,SACVH,EAAOI,QAAUL,EAAQI,S,qBCdjBH,EAAOI,QAAU,EAAQ,GAAR,EAAgE,IAEnFC,KAAK,CAACL,EAAOC,EAAI,4gCAA6gC,M,6VCmEvhCK,UA5Df,SAAcC,GAAQ,IAAD,SAEaC,mBAAS,IAFtB,mBAEVC,EAFU,KAEDC,EAFC,KAGXC,EAAYC,iBAAO,MACnBC,EAAUD,iBAAO,MAavB,SAASE,EAAgBC,GAErBC,QAAQC,KAAKF,GACbR,EAAMW,QAAQb,KAAK,CACfc,SAAS,SAAD,OAAWJ,EAAKK,IACxBC,MAAO,CAACC,SAAUP,KAK1B,OArBAQ,qBAAU,WACNC,cAAaC,MAAK,SAAAC,GACdV,QAAQC,KAAKS,GACbhB,EAAWgB,EAAKC,KAAKC,KAAI,SAAAb,GAAI,O,yVAAA,IACtBA,EADsB,CAEzBc,QAASd,EAAKe,OACdA,OAAQC,YAAahB,EAAKe,OAAQ,sBAG3C,IAaC,yBAAKE,UAAU,OAAOC,IAAKpB,GACvB,kBAAC,IAAD,CAAUmB,UAAU,UAAUE,UAAWvB,GACrC,4BACIF,EAAQmB,KAAI,SAACb,EAAMoB,GAAP,OACR,wBAAIC,QAAStB,EAAgBuB,KAAK,EAAMtB,GACpCuB,IAAG,cAASvB,EAAKK,IACjBY,UAAU,QACV,yBAAKA,UAAU,QACX,kBAAC,IAAD,CAAUO,YAAa,kBAAC,IAAD,CAASC,OAAQ,GAAIC,MAAO,KACzCC,gBAAiB,aACvB,yBAAKD,MAAM,MAAMD,OAAO,MAAMG,IAAK5B,EAAKe,WAGhD,wBAAIE,UAAU,YACV,wBAAIA,UAAU,QACV,wBAAIA,UAAW,SAAUjB,EAAK6B,OAC9B,uBAAGZ,UAAW,QAASjB,EAAK8B,aAMhD,yBAAKb,UAAU,oBAAoBc,SAAO","file":"neteasemusic/static/js/4.70239670.chunk.js","sourcesContent":["var content = require(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/stylus-loader/index.js!./index.styl\");\n\nif (typeof content === 'string') {\n  content = [[module.id, content, '']];\n}\n\nvar options = {}\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = require(\"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\")(content, options);\n\nif (content.locals) {\n  module.exports = content.locals;\n}\n","exports = module.exports = require(\"../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".rank {\\n  position: fixed;\\n  width: 100%;\\n  top: 88px;\\n  bottom: 0;\\n}\\n.rank .toplist {\\n  height: calc(100vh - 89px - 60px);\\n  overflow: hidden;\\n}\\n.rank .toplist .item {\\n  display: flex;\\n  margin: 0 20px;\\n  padding-top: 20px;\\n  height: 100px;\\n}\\n.rank .toplist .item:last-child {\\n  padding-bottom: 20px;\\n}\\n.rank .toplist .item .icon {\\n  flex: 0 0 100px;\\n  width: 100px;\\n  height: 100px;\\n}\\n.rank .toplist .item .songlist {\\n  flex: 1;\\n  display: flex;\\n  flex-direction: column;\\n  justify-content: center;\\n  padding: 0 20px;\\n  height: 100px;\\n  overflow: hidden;\\n  background: #333;\\n  color: rgba(255,255,255,0.3);\\n  font-size: 12px;\\n}\\n.rank .toplist .item .songlist .song {\\n  text-overflow: ellipsis;\\n  overflow: hidden;\\n  white-space: nowrap;\\n  line-height: 36px;\\n}\\n.rank .toplist .item .songlist .song .title {\\n  font-size: 14px;\\n  color: rgba(254,252,252,0.659);\\n}\\n.rank .toplist .loading-container {\\n  position: absolute;\\n  width: 100%;\\n  top: 50%;\\n  transform: translateY(-50%);\\n}\\n\", \"\"]);\n\n","import React, {useState, useRef, useEffect} from 'react';\r\nimport {MyScroll} from \"../../components\";\r\nimport LazyLoad from \"react-lazyload\";\r\nimport {Loading} from \"../../components\";\r\nimport './index.styl'\r\nimport {getTopList} from \"../../services/NetEaseAxios\";\r\nimport {setImageSize} from \"../../common/js/dom\";\r\n\r\n\r\nfunction Rank(props) {\r\n\r\n    const [topList, setTopList] = useState([]);\r\n    const scrollRef = useRef(null);\r\n    const rankRef = useRef(null);\r\n\r\n    useEffect(() => {\r\n        getTopList().then(resp => {\r\n            console.info(resp);\r\n            setTopList(resp.data.map(item => ({\r\n                ...item,\r\n                picUrl0: item.picUrl,\r\n                picUrl: setImageSize(item.picUrl, \"200y200\"),\r\n            })));\r\n        });\r\n    }, []);\r\n\r\n    function handleItemClick(item) {\r\n\r\n        console.info(item);\r\n        props.history.push({\r\n            pathname: `/rank/${item.id}`,\r\n            state: {playlist: item},\r\n        });\r\n\r\n    }\r\n\r\n    return (\r\n        <div className=\"rank\" ref={rankRef}>\r\n            <MyScroll className=\"toplist\" reference={scrollRef}>\r\n                <ul>{\r\n                    topList.map((item, index) => (\r\n                        <li onClick={handleItemClick.bind(this, item)}\r\n                            key={`rank${item.id}`}\r\n                            className=\"item\">\r\n                            <div className=\"icon\">\r\n                                <LazyLoad placeholder={<Loading height={50} width={50}/>}\r\n                                          scrollContainer={'#o-scroll'}>\r\n                                    <img width=\"100\" height=\"100\" src={item.picUrl}/>\r\n                                </LazyLoad>\r\n                            </div>\r\n                            <ul className=\"songlist\">\r\n                                <li className=\"song\">\r\n                                    <h2 className={'title'}>{item.title}</h2>\r\n                                    <p className={'desc'}>{item.desc}</p>\r\n                                </li>\r\n                            </ul>\r\n                        </li>))\r\n                }\r\n                </ul>\r\n                <div className=\"loading-container\" v-show=\"!topList.length\">\r\n\r\n                </div>\r\n            </MyScroll>\r\n\r\n        </div>\r\n    );\r\n\r\n}\r\n\r\nexport default Rank;"],"sourceRoot":""}